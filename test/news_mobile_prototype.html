<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
	<title>移动端新闻首页原型 - VF News</title>
	<style>
		:root {
			--device-width: 390px; /* iPhone 14 宽度相近 */
			--device-height: 760px; /* 适配一屏展示 */
			--radius-24: 24px;
			--radius-16: 16px;
			--radius-12: 12px;
			--shadow-elev: 0 8px 24px rgba(15, 23, 42, .12);
			--primary: #3b82f6;
			--primary-600: #2563eb;
			--accent: #f59e0b;
			--bg: #0b1020;
			--panel: #0f172a;
			--text: #e5e7eb;
			--muted: #9aa4b2;
		}

		/* 页面舞台，左右分栏：左侧手机原型，右侧设计说明 */
		html, body { height: 100%; }
		body {
			margin: 0;
			font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, PingFang SC, Microsoft YaHei, Helvetica Neue, Arial, Noto Sans, sans-serif;
			background:
				radial-gradient(80% 120% at 10% 10%, #1f2937 0%, transparent 50%),
				radial-gradient(80% 100% at 100% 0%, #111827 0%, transparent 50%),
				linear-gradient(180deg, #0b1020 0%, #0b1020 100%);
			color: var(--text);
			display: flex;
			align-items: center;
			justify-content: center;
			overflow: hidden; /* 保证一屏 */
		}

		.stage {
			width: min(1100px, 96vw);
			height: min(860px, 96vh);
			display: grid;
			grid-template-columns: var(--device-width) 1fr;
			gap: 24px;
			align-items: center;
		}

		/* 手机设备外框 */
		.device {
			width: var(--device-width);
			height: var(--device-height);
			border-radius: 38px;
			padding: 14px;
			background: linear-gradient(145deg, #12192b, #0b1020);
			box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
			position: relative;
		}

		.notch {
			position: absolute;
			top: 10px;
			left: 50%;
			transform: translateX(-50%);
			width: 160px;
			height: 22px;
			border-radius: 12px;
			background: #0b1020;
			box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
			z-index: 10;
		}

		.screen {
			position: relative;
			width: 100%;
			height: 100%;
			border-radius: 28px;
			overflow: hidden;
			background: linear-gradient(180deg, #0c1226 0%, #0a0f21 100%);
		}

		/* 顶部栏 */
		.topbar {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 18px 18px 10px;
			position: relative;
			z-index: 1;
		}
		.brand {
			font-weight: 800;
			letter-spacing: .3px;
			font-size: 18px;
			background: linear-gradient(90deg, #60a5fa, #a78bfa, #f472b6);
			-webkit-background-clip: text;
			background-clip: text;
			color: transparent;
		}
		.search {
			flex: 1;
			margin: 0 10px 0 14px;
			position: relative;
		}
		.search input {
			width: 100%;
			padding: 10px 36px 10px 36px;
			border-radius: 12px;
			background: #11172c;
			border: 1px solid rgba(148,163,184,.18);
			color: var(--text);
			outline: none;
			font-size: 13px;
		}
		.search .icon {
			position: absolute;
			left: 10px;
			top: 50%;
			transform: translateY(-50%);
			color: var(--muted);
			font-size: 14px;
		}
		.action {
			width: 36px;
			height: 36px;
			border-radius: 10px;
			background: linear-gradient(145deg, #1a2544, #0f1833);
			border: 1px solid rgba(148,163,184,.16);
			display: grid; place-items: center; color: #fbbf24;
		}

		/* 分类筛选标签 */
		.tabs { display: flex; gap: 8px; padding: 0 16px 12px; }
		.tab {
			padding: 8px 12px;
			font-size: 12px;
			border-radius: 999px;
			background: #0f1730;
			border: 1px solid rgba(148,163,184,.16);
			color: var(--muted);
			cursor: pointer;
			transition: all .25s ease;
		}
		.tab.active {
			color: white;
			background: linear-gradient(90deg, #2563eb, #7c3aed);
			border-color: transparent;
			box-shadow: 0 6px 18px rgba(124, 58, 237, .35);
		}
		.tab:hover { transform: translateY(-1px); }

		/* 新闻列表 */
		.feed { padding: 0 16px 86px; overflow-y: auto; height: calc(100% - 160px); scrollbar-width: none; -webkit-overflow-scrolling: touch; }
		.feed::-webkit-scrollbar { display: none; }
		.card {
			background: #0f172a;
			border: 1px solid rgba(148,163,184,.14);
			border-radius: var(--radius-16);
			overflow: hidden;
			box-shadow: var(--shadow-elev);
			margin-bottom: 12px;
			cursor: pointer;
			transition: transform .18s ease, box-shadow .18s ease;
		}
		.card:hover { transform: translateY(-2px); box-shadow: 0 10px 28px rgba(15, 23, 42, .28); }
		.card .media { height: 150px; background: linear-gradient(120deg, #1e293b, #0b1020); position: relative; }
		.card .media::after { content: ""; position: absolute; inset: 0; background:
			linear-gradient(0deg, rgba(0,0,0,.45), rgba(0,0,0,0)); }
		.card .content { padding: 12px; }
		.title { font-size: 15px; font-weight: 700; line-height: 1.35; margin: 2px 0 8px; }
		.meta { display: flex; align-items: center; gap: 8px; color: var(--muted); font-size: 12px; }
		.tag { padding: 2px 8px; border-radius: 999px; background: rgba(37,99,235,.12); color: #93c5fd; border: 1px solid rgba(59,130,246,.25); }

		/* 下拉刷新指示器 */
		.refresh-indicator { position: sticky; top: -1px; z-index: 2; height: 0; display: flex; align-items: center; justify-content: center; }
		.refresh-chip { margin-top: 10px; padding: 6px 10px; border-radius: 999px; background: rgba(59,130,246,.15); color: #bfdbfe; font-size: 12px; border: 1px solid rgba(59,130,246,.35); opacity: 0; transform: translateY(-12px); transition: all .18s ease; }
		.refresh-chip.show { opacity: 1; transform: translateY(0); }

		/* 底部导航 */
		.bottom-nav {
			position: absolute; left: 0; right: 0; bottom: 0;
			padding: 10px 14px 18px;
			backdrop-filter: blur(10px);
			background: linear-gradient(180deg, rgba(2,6,23,.0), rgba(2,6,23,.55) 25%, rgba(2,6,23,.85));
		}
		.nav {
			background: #0d1429;
			border: 1px solid rgba(148,163,184,.16);
			border-radius: 18px;
			padding: 10px;
			display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;
		}
		.nav-btn {
			border: 0; outline: 0; cursor: pointer;
			background: transparent; color: var(--muted);
			border-radius: 12px; padding: 8px 6px;
			display: grid; place-items: center; gap: 6px;
			transition: all .2s ease;
			font-size: 12px;
		}
		.nav-btn .ico { font-size: 18px; }
		.nav-btn.active { color: white; background: linear-gradient(180deg, rgba(37,99,235,.16), rgba(37,99,235,.08)); box-shadow: inset 0 0 0 1px rgba(59,130,246,.35); }
		.nav-btn:hover { transform: translateY(-1px); }

		/* 详情弹层 */
		.modal {
			position: absolute; inset: 0; display: none; place-items: end; background: rgba(2,6,23,.55);
		}
		.modal.open { display: grid; }
		.sheet {
			width: 100%; max-height: 78%; border-top-left-radius: 20px; border-top-right-radius: 20px;
			background: #0d1326; border: 1px solid rgba(148,163,184,.16);
			box-shadow: 0 -10px 40px rgba(0,0,0,.45);
			animation: slideUp .24s ease-out;
		}
		@keyframes slideUp { from { transform: translateY(12px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
		.sheet .handle { width: 44px; height: 4px; border-radius: 4px; background: rgba(148,163,184,.35); margin: 8px auto; }
		.sheet .body { padding: 10px 14px 14px; overflow-y: auto; max-height: calc(78vh - 20px); }
		.sheet h3 { margin: 6px 0 10px; font-size: 16px; }
		.sheet .para { color: var(--muted); line-height: 1.6; font-size: 13px; }

		/* 右侧设计说明 */
		.notes {
			align-self: stretch;
			display: flex; flex-direction: column;
			gap: 10px; padding: 12px 16px;
			background: rgba(15,23,42,.6);
			border: 1px solid rgba(148,163,184,.18);
			border-radius: 18px;
			overflow: hidden;
		}
		.notes h2 { margin: 0; font-size: 18px; }
		.note-item { display: flex; gap: 10px; align-items: flex-start; font-size: 13px; color: #cbd5e1; }
		.badge { width: 22px; height: 22px; border-radius: 999px; background: #1e293b; display: grid; place-items: center; color: #93c5fd; font-weight: 700; border: 1px solid rgba(148,163,184,.3); }
		.note-em { color: #f8fafc; }

		/* UI 标注数字（与说明对应）*/
		.dot {
			position: absolute; width: 22px; height: 22px; border-radius: 999px;
			background: #1e293b; border: 1px solid rgba(148,163,184,.35);
			color: #93c5fd; font-weight: 700; display: grid; place-items: center; font-size: 12px;
			box-shadow: 0 4px 10px rgba(2,6,23,.5);
		}
		.dot.soft { opacity: .9; }
	</style>
</head>
<body>
	<div class="stage" role="application" aria-label="移动端新闻首页原型">
		<!-- 左：手机原型 -->
		<div class="device" aria-label="设备">
			<div class="notch"></div>
			<div class="screen">
				<!-- 顶部栏 -->
				<div class="topbar">
					<div class="brand">VF News</div>
					<div class="search">
						<span class="icon">🔍</span>
						<input id="searchInput" type="search" placeholder="搜索热点 / 话题 / 媒体" aria-label="搜索" />
					</div>
					<div class="action" title="通知">🔔</div>
				</div>

				<!-- 分类标签（类别独立：动漫/漫画/小说/本地） -->
				<div class="tabs" role="tablist" aria-label="筛选分类">
					<div class="tab active" role="tab" data-filter="all">全部</div>
					<div class="tab" role="tab" data-filter="anime">动漫</div>
					<div class="tab" role="tab" data-filter="manga">漫画</div>
					<div class="tab" role="tab" data-filter="novel">小说</div>
					<div class="tab" role="tab" data-filter="local">本地</div>
				</div>

				<!-- 新闻列表 -->
				<div class="feed" id="feed">
					<div class="refresh-indicator"><div id="refreshChip" class="refresh-chip">释放刷新</div></div>
					<!-- 动态列表容器：静态示例将被替换 -->
					<div class="card" data-category="anime" data-time="5" data-hot="65">
						<div class="media" style="background-image: linear-gradient(120deg, #1d4ed8, #7c3aed); background-size: cover;">
							<span class="dot soft" style="top: 10px; left: 10px;">1</span>
						</div>
						<div class="content">
							<div class="title">新番资讯：AI 作画助力番剧制作提速</div>
							<div class="meta">
								<span class="tag">动漫</span>
								<span>· 5 分钟前</span>
								<span>· 热度 6.5k</span>
							</div>
						</div>
					</div>

					<div class="card" data-category="manga" data-time="60" data-hot="48">
						<div class="media" style="background-image: linear-gradient(120deg, #8b5cf6, #06b6d4);">
						</div>
						<div class="content">
							<div class="title">漫画连载：人气新作剧情迎来反转高潮</div>
							<div class="meta">
								<span class="tag" style="background: rgba(139,92,246,.12); color: #ddd6fe; border-color: rgba(139,92,246,.35);">漫画</span>
								<span>· 1 小时前</span>
								<span>· 热度 4.8k</span>
							</div>
						</div>
					</div>

					<div class="card" data-category="local" data-time="120" data-hot="98">
						<div class="media" style="background-image: linear-gradient(120deg, #ef4444, #f59e0b);">
						</div>
						<div class="content">
							<div class="title">城市夜读会：图书馆漫画专场人气火爆</div>
							<div class="meta">
								<span class="tag" style="background: rgba(239,68,68,.12); color: #fecaca; border-color: rgba(248,113,113,.35);">本地</span>
								<span>· 2 小时前</span>
								<span>· 热度 9.8k</span>
							</div>
						</div>
					</div>

					<div class="card" data-category="novel" data-time="20" data-hot="23">
						<div class="media" style="background-image: linear-gradient(120deg, #10b981, #06b6d4);">
						</div>
						<div class="content">
							<div class="title">原创小说榜：新作登顶，评论热议世界观</div>
							<div class="meta">
								<span class="tag" style="background: rgba(16,185,129,.12); color: #a7f3d0; border-color: rgba(16,185,129,.3);">小说</span>
								<span>· 20 分钟前</span>
								<span>· 热度 1.1k</span>
							</div>
						</div>
					</div>
				</div>

				<!-- 底部导航 -->
				<div class="bottom-nav">
					<div class="nav" role="tablist" aria-label="底部导航">
						<button class="nav-btn active" data-tab="home" aria-label="综合">
							<div class="ico">🏠</div>
							<div>综合</div>
						</button>
						<button class="nav-btn" data-tab="latest" aria-label="最新">
							<div class="ico">🆕</div>
							<div>最新</div>
						</button>
						<button class="nav-btn" data-tab="hot" aria-label="热门">
							<div class="ico">🔥</div>
							<div>热门</div>
						</button>
						<button class="nav-btn" data-tab="me" aria-label="我的">
							<div class="ico">👤</div>
							<div>我的</div>
						</button>
					</div>
				</div>

				<!-- 详情弹层 -->
				<div class="modal" id="modal" aria-hidden="true">
					<div class="sheet" role="dialog" aria-modal="true" aria-label="新闻详情">
						<div class="handle"></div>
						<div class="body">
							<h3 id="detailTitle">标题</h3>
							<p class="para" id="detailDesc">这里是新闻内容摘要。点击空白区域关闭。</p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- 右：设计说明（与 UI 上的标注数字对应） -->
		<section class="notes" aria-label="设计说明">
			<h2>原型设计说明</h2>
			<div class="note-item"><span class="badge">1</span><div>顶部采用 <span class="note-em">品牌 + 搜索 + 快捷操作</span>三段式布局，形成清晰的任务入口。</div></div>
			<div class="note-item"><span class="badge">2</span><div>分类 <span class="note-em">Tags</span> 作为二级筛选，支持快速切换「动漫/漫画/小说/本地」等类别，与主排序独立。</div></div>
			<div class="note-item"><span class="badge">3</span><div>新闻卡片采用 <span class="note-em">媒体图 + 标题 + 元信息</span>结构，信息层级明确，卡片悬浮有轻微升起效果。</div></div>
			<div class="note-item"><span class="badge">4</span><div>底部导航固定，四色语义图标对齐「综合、最新、热门、我的」，与顶部类别筛选相互独立。</div></div>
			<div class="note-item"><span class="badge">5</span><div>点击卡片弹出 <span class="note-em">底部抽屉</span>查看摘要；点击空白区域关闭，满足移动端常见交互心智。</div></div>
			<div class="note-item"><span class="badge">6</span><div>整体采用 <span class="note-em">深色氛围 + 霓虹渐变</span>，对焦核心内容，兼顾可读性与质感。</div></div>
		</section>
	</div>

	<script>
		const tabs = Array.from(document.querySelectorAll('.tab'));
		const feed = document.getElementById('feed');
		let cards = Array.from(feed.querySelectorAll('.card'));
		const navBtns = Array.from(document.querySelectorAll('.nav-btn'));
		const modal = document.getElementById('modal');
		const detailTitle = document.getElementById('detailTitle');
		const detailDesc = document.getElementById('detailDesc');
		const searchInput = document.getElementById('searchInput');
		const refreshChip = document.getElementById('refreshChip');

		const BASE_URL = 'http://localhost:5175';

		async function fetchNews(category, sort){
			const url = new URL(BASE_URL + '/api/news');
			if (category) url.searchParams.set('category', category);
			if (sort) url.searchParams.set('sort', sort);
			const res = await fetch(url.toString());
			const data = await res.json();
			return data.items || [];
		}

		function renderList(items){
			// 清理动态卡片（保留 refresh-indicator）
			Array.from(feed.querySelectorAll('.card')).forEach(n => n.remove());
			const frag = document.createDocumentFragment();
			items.forEach((it, idx) => {
				const card = document.createElement('div');
				card.className = 'card';
				card.setAttribute('data-category', it.category || 'novel');
				card.setAttribute('data-time', String(it.time || 0));
				card.setAttribute('data-hot', String(it.hot || 0));
				card.innerHTML = `
					<div class="media" style="background-image: linear-gradient(120deg, #1e293b, #0b1020);"></div>
					<div class="content">
						<div class="title">${escapeHtml(it.title || '虚拟新闻')}</div>
						<div class="meta">
							<span class="tag">${mapCategory(it.category)}</span>
							<span>· 热度 ${it.hot || 0}</span>
						</div>
					</div>`;
				card.addEventListener('click', () => openDetail(it.title, it.content));
				frag.appendChild(card);
			});
			feed.appendChild(frag);
			cards = Array.from(feed.querySelectorAll('.card'));
		}

		function escapeHtml(str=''){
			return str.replace(/[&<>"]+/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[s]));
		}
		function mapCategory(key){
			return ({anime:'动漫', manga:'漫画', novel:'小说', local:'本地'}[key] || '综合');
		}

		let currentCategory = 'all';
		let currentSort = 'home'; // home=综合、latest=按时间、hot=按热度

		function setActiveTab(filter) {
			tabs.forEach(t => t.classList.toggle('active', t.dataset.filter === filter || (filter === 'all' && t.dataset.filter === 'all')));
			currentCategory = filter;
		}

		function setActiveNav(key) {
			navBtns.forEach(b => b.classList.toggle('active', b.dataset.tab === key));
			currentSort = key;
		}

		function applyCategoryAndSort() {
			// 1) 过滤：类别
			cards.forEach(card => {
				const cat = card.getAttribute('data-category');
				const visible = currentCategory === 'all' || cat === currentCategory;
				card.style.display = visible ? '' : 'none';
			});

			// 2) 排序：综合（默认顺序）、按时间（data-time 升序=越新越靠前）、按热度（data-hot 降序）
			const visibleCards = cards.filter(c => c.style.display !== 'none');
			let sorted = [...visibleCards];
			if (currentSort === 'latest') {
				sorted.sort((a,b) => Number(a.dataset.time) - Number(b.dataset.time));
			} else if (currentSort === 'hot') {
				sorted.sort((a,b) => Number(b.dataset.hot) - Number(a.dataset.hot));
			}
			// 重新附加节点，体现排序
			sorted.forEach(node => feed.appendChild(node));
		}

		// 顶部类别点击
		tabs.forEach(tab => {
			tab.addEventListener('click', () => {
				const filter = tab.dataset.filter;
				setActiveTab(filter);
				applyCategoryAndSort();
			});
		});

		// 底部排序点击
		navBtns.forEach(btn => {
			btn.addEventListener('click', () => {
				const key = btn.dataset.tab;
				setActiveNav(key);
				applyCategoryAndSort();
				if (key === 'me') {
					openDetail('我的', '这里展示用户资料、收藏、历史等。原型中以说明替代，可在实际产品中接入用户中心。');
				}
			});
		});

		// 卡片点击 -> 详情
		cards.forEach(card => {
			card.addEventListener('click', () => {
				const title = card.querySelector('.title')?.textContent?.trim() || '详情';
				openDetail(title, '这是一段用于演示的摘要。实际项目中替换为真实内容。点击外部关闭。');
			});
		});

		function openDetail(title, desc) {
			detailTitle.textContent = title;
			detailDesc.textContent = desc;
			modal.classList.add('open');
			modal.setAttribute('aria-hidden', 'false');
		}

		modal.addEventListener('click', (e) => {
			if (e.target === modal) {
				modal.classList.remove('open');
				modal.setAttribute('aria-hidden', 'true');
			}
		});

		// 搜索联想（简单高亮演示）
		searchInput.addEventListener('input', () => {
			const q = searchInput.value.trim();
			cards.forEach(card => {
				const title = card.querySelector('.title')?.textContent || '';
				const ok = !q || title.includes(q);
				card.style.opacity = ok ? '1' : '.25';
			});
		});

		// 初始化默认视图
		setActiveTab('all');
		setActiveNav('home');
		applyCategoryAndSort();
	</script>
</body>
</html>

